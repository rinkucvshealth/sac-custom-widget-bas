_schema-version: '3.1'
ID: sac-custom-widget
version: 1.0.0
description: "SAP Analytics Cloud Custom Widget with AI-powered chatbot"

modules:
- name: sac-custom-widget
  type: nodejs
  path: .
  parameters:
    buildpack: nodejs_buildpack
    memory: 512M
    disk-quota: 1G
    instances: 1
  build-parameters:
    builder: npm
    build-result: dist
    supported-platforms: []
  requires:
  - name: sac-widget-db
  - name: sac-widget-uaa

resources:
- name: sac-widget-db
  type: com.sap.xs.hdi-container
  parameters:
    service: hana
    service-plan: hdi-shared
- name: sac-widget-uaa
  type: com.sap.xs.uaa
  parameters:
    service: xsuaa
    service-plan: application
    config:
      xsappname: sac-custom-widget
      tenant-mode: dedicated
      scopes:
      - name: $XSAPPNAME.Display
        description: Display access
      - name: $XSAPPNAME.Edit
        description: Edit access
      role-templates:
      - name: Viewer
        description: View data
        scope-references:
        - $XSAPPNAME.Display
      - name: Editor
        description: Edit data
        scope-references:
        - $XSAPPNAME.Display
        - $XSAPPNAME.Edit


